$(document).ready(function(){
  // update the modal
  
  <% if @result.nil? %>
    <% new_row = escape_javascript(  render :partial => "machines/fail_to_update", :locals => {
              :price => @price,
              :part_code => @part_code
            }) %>
  <% else %>
    <% new_row = escape_javascript(  render :partial => "machines/update_successful", :locals => {
              :price => @price,
              :part_code => @part_code
            }) %>
  <% end %>
  
  $("#modal_notification").replaceWith('<%= new_row %>').show();
  $("#edit_form").hide();
  
  
  // update the display data
  <% new_row = escape_javascript( render :partial => "machines/machine_entry", :locals => {
    :machine => @machine
  }) %>
  
  $("#machine_entry-<%= @machine.id %>").replaceWith('<%= new_row %>');
});
